<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>De Groene Weide</title>
    <link rel="stylesheet" href="styles.css">
    <script src="./scripts/page.js"></script>
    <script src="https://kit.fontawesome.com/e7e6177339.js" crossorigin="anonymous"></script>
    <style>
        /* Full-width input fields */
input[type=text], input[type=password], input[type=date], input[type=email] {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 25px;
  box-sizing: border-box;
  transition: 0.5s;
}

input[type=text]:hover, input[type=password]:hover, input[type=date]:hover, input[type=email]:hover, input[type=text]:focus, input[type=password]:focus, input[type=date]:focus, input[type=email]:focus {
    background-color: #aaaaaa;
    border-radius: 0px;
    transition: 0.5s;
}

input[type=text]:hover::placeholder, input[type=password]:hover::placeholder, input[type=date]:hover::placeholder, input[type=email]:hover::placeholder, input[type=text]:focus::placeholder, input[type=password]:focus::placeholder, input[type=date]:focus::placeholder, input[type=email]:focus::placeholder {
    color: #000000;
    transition: 0.5s;
}

/* Set a style for all buttons */
.button {
  background-color: #04AA6D;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  cursor: pointer;
  width: 100%;
  border-radius: 25px;
  transition: 0.5s;
}

.button:hover {
    border-radius: 0px;
    transition: 0.5s;
}

/* Extra styles for the cancel button */
.cancelbtn {
  width: auto;
  padding: 10px 18px;
  background-color: #f44336;
}

.cancelbtn2 {
    align-content: center;
  width: auto;
  padding: 10px 18px;
  background-color: #f44336;
}

/* Center the image and position the close button */
.imgcontainer {
  text-align: center;
  margin: 24px 0 12px 0;
  position: relative;
}

img.avatar {
  width: 40%;
  border-radius: 50%;
}

.container {
  padding: 16px;
}

span.psw {
  float: right;
  padding-top: 16px;
}

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  backdrop-filter: blur(5px);
  box-shadow: 0px 0px 30px rgba(277, 228, 237, 0.37);
  border: 2px solid rgba(255, 255, 255, 0.18);
  background: rgba(200, 200, 200, 0.25);
  padding-top: 60px;
}

.transparant {
    backdrop-filter: blur(5px);
  box-shadow: 0px 0px 30px rgba(277, 228, 237, 0.37);
  background: rgba(200, 200, 200, 0.25);
  border-bottom-left-radius: 25px;
  border-bottom-right-radius: 25px;
}

/* Modal Content/Box */
.modal-content {
  /* background-color: #fefefe; */
  backdrop-filter: blur(30px);
    box-shadow: 0px 0px 30px rgba(277, 228, 237, 0.37);
    border: 2px solid rgba(255, 255, 255, 0.18);
    border-radius: 25px;
    background: rgba(255, 255, 255, 0.25);
  margin: 5% auto 15% auto; /* 5% from the top, 15% from the bottom and centered */
  border: 1px solid #888;
  width: 80%; /* Could be more or less, depending on screen size */
}

/* The Close Button (x) */
.close {
  position: absolute;
  right: 25px;
  top: 0;
  color: #000;
  font-size: 35px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: red;
  cursor: pointer;
}

/* Add Zoom Animation */
.animate {
  -webkit-animation: animatezoom 0.6s;
  animation: animatezoom 0.6s
}

@-webkit-keyframes animatezoom {
  from {-webkit-transform: scale(0)} 
  to {-webkit-transform: scale(1)}
}
  
@keyframes animatezoom {
  from {transform: scale(0)} 
  to {transform: scale(1)}
}

/* Change styles for span and cancel button on extra small screens */
@media screen and (max-width: 300px) {
  span.psw {
     display: block;
     float: none;
  }
  .cancelbtn {
     width: 100%;
  }
}
    </style>
</head>
<body onload="FetchMainData('header'); FetchMainData('booking-menu'); FetchMainData('footer'); document.getElementById('id01').style.display='block'">
    <header id="header">
    </header>
    <main id="booking-menu">
    </main>

    <section class="hero">
        <div class="hero-text">
            <h1>Luxe Vakantiepark in Dishoek</h1>
            <p>
                Verscholen in het groen van het Noordelijk kustgebied ligt Boerderijcamping "De Groene Weide."
                Een unieke plek om tot rust te komen, ver weg van het hectische stadsleven.
            </p>
        </div>
    </section>

    <section>
        <div id="id01" class="modal">
                <form class="modal-content animate" id="signup-form">
                    <div class="imgcontainer">
                        <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
                    </div>
                    <div class="container">
                        <label for="uname"><b>Username</b></label>
                        <input type="text" placeholder="Enter Username" name="uname" required>
                        
                        <label for="psw"><b>Password</b></label>
                        <input type="password" placeholder="Enter Password" name="psw" required>
                      
                        <label for="email"><b>Email</b></label>
                        <input type="email" placeholder="Enter Email" name="email" required>

                        <label for="dob"><b>Date of Birth:</b></label>
                        <input type="date" placeholder="Enter Birthday" name="dob" required>

                        <button type="submit" class="button">Sign-Up</button>
                        <label>
                            <input type="checkbox" checked="checked" name="remember"> Remember me
                        </label>
                    </div>
                  
                    <div class="container transparant" style="border-top: 1px solid rgba(150, 150, 150, 0.8);">
                        <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn button">Cancel</button>
                        <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn2 button">test</button>
                        <span class="psw">Forgot <a href="#">password?</a></span>
                    </div>
                </form>
            </div>
    </section>

    <br>
    <br>

    <footer id="footer">
    </footer>
    <script src="./scripts/script.js"></script>
    <script>
        document.getElementById("signup-form").addEventListener("submit", async function(event) {
        event.preventDefault(); // Prevent the default form submission

        // Generate a random UUID
        const user_id = crypto.randomUUID();

        // Gather form data
        const name = document.querySelector("input[name='uname']").value;
        const email = document.querySelector("input[name='email']").value;
        const dob = document.querySelector("input[name='dob']").value;
        const password = document.querySelector("input[name='psw']").value;

        // Prepare the data as JSON
        const data = {
            user_id: user_id,
            name: name,
            email: email,
            date_of_birth: dob,
            password: password
        };

        try {
            // Send the POST request to the server
            const response = await fetch("http://108.61.188.109:3030/users", { 
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(data)
            });

            // Handle the response
            if (response.ok) {
                alert("Sign-up successful!");
                document.getElementById('id01').style.display='none'
            } else {
                const error = await response.text();
                alert(`Error: ${error}`);
            }
        } catch (error) {
            console.error("Error submitting the form:", error);
            alert("An error occurred. Please try again later.");
        }
    });
    </script>
</body>
</html>